<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>JLaTeXMath with javascript</title>
    <script type="text/javascript" language="javascript" src="jlatexmath/jlatexmath.nocache.js"></script>
    <script>
        var drawLatex = function(id) {
        
          var canvas = document.getElementById('latex'+id)
          var context = canvas.getContext('2d');

          // jlmlib.drawLatex(...) params
          var opts = {
            context : canvas.getContext('2d'),
            latex : "\\textcolor{blue}{HelloWorld}\\sqrt{"+id+"}",
            size : 40,
            x : 0,
            y : 0,
            type : jlmlib.BOLD | jlmlib.ITALIC,
            foregroundColor : '#FF0000',
            backgroundColor : '#00FF00',
            callback : function() { console.log('callback') },
            insets : {
              top : 20,
              bottom : 5,
              left : 10,
              right : 7
            }
          }
          
          var ret = jlmlib.drawLatex(opts);
          var bsline = ret.height * ret.baseline;
          var width = ret.width,
          	  height = ret.height;
          
          context.beginPath();
		  context.moveTo(0, bsline);
		  context.lineTo(300, bsline);
		  context.strokeStyle = '#ff0000';
		  context.stroke();
          
          console.log(ret);
        }
        
        var drawAll = function() {
        	jlmlib.initWith("\\DeclareMathOperator{\\sech}{sech} ");
        	jlmlib.initWith("\\DeclareMathOperator{\\csch}{csch} ");
        	//jlmlib.setFontBaseUrl("http://web.geogebra.org/5.0/web/");
        	for(var i = 1; i < 5; i++) {
        		drawLatex(i);
        	}
        }
    </script>
  </head>

 
  <!-- Maybe a callback from the library would be good to signal the availability of the library -->
  <body onload="setTimeout(drawAll, 2500)">
    <h1>JLaTeXMath test</h1>
    <!-- Important to set no just the height/width in style, but the height/width property of canvas also. -->
    <canvas id="latex1" style="height: 500px; width: 500px" width="500px" height="500px"></canvas>
    <br>
    <canvas id="latex2" style="height: 500px; width: 500px" width="500px" height="500px"></canvas>
    <br>
    <canvas id="latex3" style="height: 500px; width: 500px" width="500px" height="500px"></canvas>
    <br>
    <canvas id="latex4" style="height: 500px; width: 500px" width="500px" height="500px"></canvas>
    <br>
  </body>
</html>
